name: Pull Request on master branch

# only trigger on pull request closed events
on:
  pull_request:
    branches:
      - master

env:
  PR_NUMBER: github.event.number
  BRANCH_NAME: GITHUB_HEAD_REF
  USERNAME: github.event.pull_request.user.login

jobs:
  master_pr:
    name: 'PR on Master'
    runs-on: ubuntu-latest
    steps:
      - name: 'Checkout the code'
        uses: actions/checkout@v2

      - name: 'Use kceb/pull-request-url-action@v1'
        uses: kceb/pull-request-url-action@v1
        id: pr-url
        env:
          PR_URL: steps.pr-url.outputs.url

      - name: 'Display event informations'
        run: |
          echo "PR $PR_NUMBER has been opened on master branch"
          echo "The branch name is $BRANCH_NAME"
          echo "This PR is opened by $USERNAME"
          echo "The PR url is $PR_URL"
